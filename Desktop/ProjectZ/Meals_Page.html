<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalorieFlow Diary</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Fonts used for Diary Page content -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <!-- Navbar Fonts (DM Sans is the default body font, Material Symbols is for icons) -->
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Flatpickr Date Picker Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://npmcdn.com/flatpickr/dist/themes/dark.css">

    <style>
        /* ---------------------------------------------------- */
        /* DIARY PAGE STYLES & VARIABLES (Original Content)       */
        /* ---------------------------------------------------- */
        :root {
            --cf-bg-primary: #051134;
            --cf-navbar-bg: #7ECCC4;
            --cf-card-bg: #0C1E4F;
            --cf-text-light: #f8f9fa;
            /* Light text for dark background (Correct) */
            --cf-text-secondary: #adb5bd;
            --cf-icon-color: #7ECCC4;
            --cf-border-color: rgba(255, 255, 255, 0.1);

            /* NAVBAR VARIABLES (INTEGRATED) */
            --cf-nav-bg: #7ECCC4;
            /* Softer, dark blue-gray for NAVBAR LINKS/LOGO (Correct for light navbar background) */
            --cf-dark-contrast: #27403b;
            --cf-link-hover-blue: #0d6efd;
            /* Using the new soft dark for links too */
            --cf-link-default: #27403b;
            --cf-link-hover: #084c48;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--cf-bg-primary);
            color: var(--cf-text-light);
            /* ENSURING BODY TEXT IS LIGHT */
            scroll-behavior: smooth;
            min-height: 100vh;
            /* Added padding-top to account for the fixed navbar height */
            padding-top: 60px;
        }

        /* Meal Section Styles */
        .meal-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 0;
        }

        .meal-item:last-child {
            border-bottom: none;
        }

        .meal-icon {
            color: var(--cf-icon-color);
            margin-right: 1rem;
            width: 25px;
        }

        /* Summary Table Styles */
        .summary-card {
            background-color: var(--cf-card-bg);
            border-radius: 10px;
            padding: 1.5rem;
        }

        .table {
            --bs-table-bg: transparent;
            --bs-table-color: var(--cf-text-light);
        }

        .table th {
            color: var(--cf-text-secondary);
            font-weight: 500;
        }

        .text-green {
            color: #4BB543 !important;
        }

        /* New style for the "Add Food" buttons */
        .btn-meal-add {
            background-color: #8BC4BE;
            color: var(--cf-bg-primary);
            font-weight: bold;
            padding: 0.375rem 0.75rem;
            border-radius: 0.25rem;
            text-decoration: none !important;
            transition: background-color 0.2s, transform 0.2s;
        }

        /* UPDATED: Darker hover effect for Add Food buttons & Pop effect */
        .btn-meal-add:hover {
            background-color: #6e9b95;
            /* Visibly darker teal/gray */
            color: var(--cf-bg-primary);
            transform: scale(1.05);
            /* Pop effect */
        }

        /* Flatpickr Calendar & Navigation Styles (Chevrons removed from HTML) */
        .date-nav-icon {
            color: var(--cf-text-secondary);
            cursor: pointer;
            position: relative;
            z-index: 10;
        }

        /* New style for chevron buttons to remove default button look */
        .btn-chevron {
            background: transparent;
            border: none;
            padding: 0 0.5rem;
            color: var(--cf-text-secondary);
            /* Default: Gray */
            font-size: 1.25rem;
            cursor: pointer;
            line-height: 1;
            transition: color 0.1s;
        }

        .btn-chevron:hover {
            color: var(--cf-text-light);
            /* Hover: White */
        }

        .date-input {
            cursor: pointer;
        }

        .flatpickr-calendar {
            background-color: var(--cf-card-bg) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        /* Calendar Icon Hover Effect */
        .calendar-icon-toggle {
            transition: color 0.2s ease, transform 0.2s ease;
            cursor: pointer;
        }

        .calendar-icon-toggle:hover {
            color: var(--cf-dark-contrast) !important;
            /* Darken the icon to the link color */
            transform: scale(1.2);
            /* Pop effect */
        }

        /* Modal Button Styles */
        .btn-add {
            background-color: #4BB543;
            color: var(--cf-bg-primary);
            font-weight: bold;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .btn-add:hover {
            background-color: #33882e;
            /* Cooler Green Hover */
            color: var(--cf-bg-primary);
        }

        .btn-cancel-red {
            background-color: #dc3545;
            color: var(--cf-text-light) !important;
            border: none;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .btn-cancel-red:hover {
            background-color: #9e1c2a;
            /* Cooler Red Hover */
            color: var(--cf-text-light) !important;
        }

        /* ---------------------------------------------------- */
        /* NAVBAR SPECIFIC STYLES (INTEGRATED)                  */
        /* ---------------------------------------------------- */
        .navbar {
            background-color: var(--cf-nav-bg) !important;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 20;
        }

        .logo-text {
            font-weight: 600;
            color: var(--cf-dark-contrast);
            font-size: 1.5rem !important;
        }

        .nav-link-item {
            color: var(--cf-link-default) !important;
            font-weight: 600;
            margin: 0 1rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            transition: color 0.3s ease, transform 0.3s ease, background-color 0.3s ease;
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        /* Active state */
        .nav-link-item.active {
            background-color: rgba(0, 0, 0, 0.2);
            color: var(--cf-link-hover) !important;
        }

        .nav-link-item:hover {
            color: var(--cf-link-hover) !important;
            background-color: rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
        }

        .nav-link-item .material-symbols-outlined {
            font-size: 20px;
            margin-right: 6px;
            font-variation-settings: 'FILL' 0, 'wght' 500;
            color: inherit;
        }

        /* ---------------------------------------------------- */
        /* --- USER/LOGOUT BUTTON STYLING --- */
        /* ---------------------------------------------------- */

        .user-logout-combo {
            background-color: transparent;
            color: var(--cf-dark-contrast) !important;
            border: none;
            border-radius: 0.5rem;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
            margin-left: 1rem;
            text-decoration: none;
        }

        .user-icon-border {
            display: flex;
            align-items: center;
            justify-content: center;
            width: auto;
            height: auto;
            border: none;
            border-radius: 0;

            order: 1;
            /* Icon position (after text) */
            margin-left: 8px;
            /* Space between text and icon */
            margin-right: 0;
            transition: border-color 0.3s ease;
        }

        .user-icon-border .material-symbols-outlined {
            font-size: 22px;
            /* Slightly larger, borderless icon */
            line-height: 1;
            color: var(--cf-dark-contrast);
            transition: color 0.3s ease;
        }

        /* Positioning logic for Icon (right) and Text (left) */
        .user-logout-combo span:last-child {
            order: 0;
            /* Ensures the text is first */
        }

        .user-logout-combo .user-icon-border {
            order: 1;
            /* Ensures the icon is second */
            margin-left: 8px;
            /* Space between text and icon */
        }


        .user-logout-combo:hover {
            /* Hover effect: Match other links */
            background-color: rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
            /* Requested hover color applied to the text */
            color: var(--cf-link-hover-blue) !important;
        }

        .user-logout-combo:hover .user-icon-border,
        .user-logout-combo:hover .user-icon-border .material-symbols-outlined {
            /* Requested hover color (#0d6efd) applied to the icon */
            color: var(--cf-link-hover-blue) !important;
            border-color: transparent !important;
            /* Ensure border remains transparent on hover */
        }


        /* LOG OUT BUTTON STYLING (USED FOR MODAL CONFIRMATION ONLY) */
        .interactive-logout-btn {
            background-color: #dc3545 !important;
            color: white !important;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.2s ease;
            border-radius: 0.5rem;
            padding: 8px 16px;
            border: none;
            margin-left: 1rem;
        }

        .interactive-logout-btn:hover {
            background-color: #c82333 !important;
            transform: translateY(-1px) scale(1.02);
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.4);
        }

        /* MODAL STYLING (For the Confirmation Popup) */
        .modal-content-custom {
            background-color: var(--cf-bg-primary) !important;
            border: 1px solid var(--cf-nav-bg) !important;
        }

        .modal-header,
        .modal-footer {
            border-color: var(--cf-border-color) !important;
            /* Using generic border color from diary styles */
        }

        /* Fix visibility issues on the dark modal */
        .modal-header .btn-close {
            filter: invert(1);
        }
    </style>
</head>

<body>

    <!-- ---------------------------------------------------- -->
    <!--                   NAVBAR (UPDATED WITH ALL LINKS)                -->
    <!-- ---------------------------------------------------- -->
    <nav id="navbar-main" class="navbar navbar-expand-lg">
        <div
            class="container-fluid max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 container d-flex justify-content-between align-items-center">

            <!-- Logo - CalorieFlow -->
            <a class="navbar-brand d-flex align-items-center me-5" href="Home_Page.html">
                <span class="fw-bold fs-5 logo-text">CalorieFlow</span>
            </a>

            <!-- Navigation Links -->
            <div class="d-none d-lg-flex justify-content-end ms-auto me-3">

                <a class="nav-link-item" href="Progress_Page.html">
                    <span class="material-symbols-outlined">analytics</span>
                    Progress
                </a>

                <a class="nav-link-item" href="Home_Page.html">
                    <span class="material-symbols-outlined">home</span>
                    Home
                </a>

                <a class="nav-link-item active" href="Meals_Page.html">
                    <span class="material-symbols-outlined">restaurant</span>
                    Meals
                </a>

                <a class="nav-link-item" href="workouts_page.html">
                    <span class="material-symbols-outlined">fitness_center</span>
                    Workouts
                </a>

                <a class="nav-link-item" href="Settings_Page.html">
                    <span class="material-symbols-outlined">settings</span>
                    Settings
                </a>
            </div>

            <!-- Log Out Button (NEW COMBINED ICON/TEXT BUTTON) -->
            <div>
                <button class="user-logout-combo" id="logoutDirectBtn" data-bs-toggle="modal"
                    data-bs-target="#confirmLogoutModal" aria-label="Log Out">

                    <!-- Log Out Text -->
                    <span>Log Out</span>

                    <!-- Bordered Icon (Now the 'logout' symbol without a border) -->
                    <span class="user-icon-border">
                        <span class="material-symbols-outlined">logout</span>
                    </span>

                </button>
            </div>
        </div>
    </nav>
    <!-- ---------------------------------------------------- -->


    <!-- Main Page Content Starts Here -->
    <!-- ADDED ID="Home_Page" HERE to serve as the anchor target for Navbar "Home" links -->
    <div id="Home_Page" class="container mt-4">

        <div class="d-flex align-items-center mb-4">
            <h4 class="me-3 mb-0">Your Food Diary For:</h4>

            <div class="d-flex align-items-center p-2 rounded position-relative"
                style="background-color: rgba(255, 255, 255, 0.1);" id="datePickerWrapper">

                <!-- Flatpickr Input -->
                <input type="text" id="datePicker" class="date-input" data-input
                    style="background: transparent; border: none; font-weight: bold; color: var(--cf-text-light); text-align: center; width: 260px;">

                <!-- Calendar Icon for dropdown -->
                <i class="fas fa-calendar-alt calendar-icon-toggle" data-toggle
                    style="color: var(--cf-icon-color); margin-left: 0.5rem;"></i>
            </div>
        </div>


        <!-- Meal Entry Section -->
        <div class="p-4 mb-5" style="background-color: var(--cf-bg-primary);">

            <div class="d-flex justify-content-between align-items-center meal-item">
                <div class="d-flex align-items-center">
                    <i class="fas fa-mug-hot meal-icon fs-4"></i>
                    <h5 class="mb-0 me-4">Breakfast</h5>
                    <small class="text-green">0 kcal</small>
                </div>
                <a href="AddingMeals_Page.html" class="btn btn-meal-add">Add Food</a>
            </div>

            <div class="d-flex justify-content-between align-items-center meal-item">
                <div class="d-flex align-items-center">
                    <i class="fas fa-burger meal-icon fs-4"></i>
                    <h5 class="mb-0 me-4">Lunch</h5>
                    <small class="text-green">0 kcal</small>
                </div>
                <a href="AddingMeals_Page.html" class="btn btn-meal-add">Add Food</a>
            </div>

            <div class="d-flex justify-content-between align-items-center meal-item">
                <div class="d-flex align-items-center">
                    <i class="fas fa-concierge-bell meal-icon fs-4"></i>
                    <h5 class="mb-0 me-4">Dinner</h5>
                    <small class="text-green">0 kcal</small>
                </div>
                <a href="AddingMeals_Page.html" class="btn btn-meal-add">Add Food</a>
            </div>

            <div class="d-flex justify-content-between align-items-center meal-item">
                <div class="d-flex align-items-center">
                    <i class="fas fa-cookie-bite meal-icon fs-4"></i>
                    <h5 class="mb-0 me-4">Snacks</h5>
                    <small class="text-green">0 kcal</small>
                </div>
                <a href="AddingMeals_Page.html" class="btn btn-meal-add">Add Food</a>
            </div>
        </div>

        <!-- Summary Table -->
        <div class="summary-card">
            <h6 class="text-uppercase text-secondary mb-3">Summary</h6>
            <div class="table-responsive">
                <table class="table table-sm text-center mb-0">
                    <thead>
                        <tr>
                            <th scope="col" class="text-start"></th>
                            <th scope="col">CALORIES <br> <small>KCAL</small></th>
                            <th scope="col">CARBS <br> <small>G</small></th>
                            <th scope="col">FAT <br> <small>G</small></th>
                            <th scope="col">PROTEIN <br> <small>G</small></th>
                            <th scope="col">SUGAR <br> <small>G</small></th>
                            <th scope="col">FIBER <br> <small>G</small></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-start fw-bold" style="color: var(--cf-icon-color);">Breakfast</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td class="text-start fw-bold" style="color: var(--cf-icon-color);">Lunch</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td class="text-start fw-bold" style="color: var(--cf-icon-color);">Dinner</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td class="text-start fw-bold" style="color: var(--cf-icon-color);">Snacks</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>


                        <tr>
                            <td class="text-start fw-bold text-green">Total Calories</td>
                            <td class="text-green">2,610</td>
                            <td class="text-green">326</td>
                            <td class="text-green">87</td>
                            <td class="text-green">131</td>
                            <td class="text-green">--</td>
                            <td class="text-green">--</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <!-- ---------------------------------------------------- -->
    <!--          LOGOUT CONFIRMATION MODAL (POP-UP)          -->
    <!-- ---------------------------------------------------- -->
    <div class="modal fade" id="confirmLogoutModal" tabindex="-1" aria-labelledby="confirmLogoutModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modal-content-custom">
                <div class="modal-header">
                    <h5 class="modal-title text-white" id="confirmLogoutModalLabel">Confirm Log Out</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-secondary">
                    Are you sure you want to log out of CalorieFlow? You can always sign back in.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <!-- Confirm Logout Button - Will handle the actual logout in JS -->
                    <button type="button" class="btn interactive-logout-btn" id="confirmLogoutFinalBtn">
                        Yes, Log Out
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ---------------------------------------------------- -->


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 1. Initialize Flatpickr 
            const fp = flatpickr("#datePickerWrapper", {
                theme: "dark",
                dateFormat: "l, F d, Y", // e.g., Sunday, November 30, 2025
                defaultDate: "today", // Sets default to current date
                wrap: true, // Enables the wrapper div to be the click target
                disableMobile: true,
            });

            // 2. Log Out Modal Logic
            const confirmLogoutFinalBtn = document.getElementById('confirmLogoutFinalBtn');
            const confirmLogoutModalElement = document.getElementById('confirmLogoutModal');

            if (confirmLogoutModalElement) {
                const bsModal = new bootstrap.Modal(confirmLogoutModalElement);

                confirmLogoutFinalBtn.addEventListener('click', () => {
                    // 1. Hide the modal
                    bsModal.hide();

                    // 2. Perform the actual logout logic
                    console.log("LOG OUT CONFIRMED: User logout process initiated via modal confirmation.");

                    // Simulated redirect to Home Page
                    window.location.href = "Home_Page.html";
                });
            }
        });
    </script>
</body>

</html>